import{r as i,u as k,ah as O,j as s,ai as _,g as v,L as r,p as l,U,aj as b,ak as B,al as T,am as H,an as $,ao as L,Z as z,_ as A,ap as I,aq as C,z as q}from"./index-Bq5uJWU6.js";import{D as R,a as F,b as Z,c as G}from"./DialogCreateCommnet-DcFKy4mq.js";const{Dot:J,Heart:K,MessageSquare:Q}=q,X=({className:y,data:e})=>{var x,h,p,u,j,f,g,N;const[P,n]=i.useState(!1),[w,c]=i.useState(!1),[E,m]=i.useState(!1),[M,t]=i.useState(!1),{currentData:o}=k(),D=O(),S=e.likes.includes(o._id);return s.jsxs(s.Fragment,{children:[((x=e==null?void 0:e.fileUrls)==null?void 0:x.length)>0&&s.jsx(R,{open:P,onOpenChange:n,attachments:e.fileUrls}),s.jsx(_,{open:w,onOpenChange:c,postId:e==null?void 0:e._id}),s.jsx(F,{data:o,onOpenChange:m,open:E,postId:e._id}),s.jsx(Z,{data:e,onOpenChange:t,open:M}),s.jsx("div",{className:v("w-full flex items-center justify-between p-5",y),children:s.jsxs("div",{className:"flex gap-3 w-full",children:[s.jsx("div",{className:"flex flex-col items-center",children:s.jsx(r,{to:l.HOME+((h=e==null?void 0:e.postedBy)==null?void 0:h.userName),children:s.jsx(U,{avatarUrl:(p=e==null?void 0:e.postedBy)==null?void 0:p.avatarUrl,displayName:(u=e==null?void 0:e.postedBy)==null?void 0:u.displayName})})}),s.jsxs("div",{className:"flex-1 w-full space-y-5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:"flex justify-between w-full",children:[s.jsxs("div",{className:"flex w-full items-center",children:[s.jsx(b,{user:e==null?void 0:e.postedBy,children:s.jsx(r,{to:l.HOME+((j=e==null?void 0:e.postedBy)==null?void 0:j.userName),className:"text-sm font-medium hover:underline",children:(f=e==null?void 0:e.postedBy)==null?void 0:f.userName})}),s.jsx(J,{}),s.jsx(B,{delayDuration:300,children:s.jsxs(T,{children:[s.jsx(H,{asChild:!0,children:s.jsx(r,{to:`${l.HOME}${l.POSTS}/${e==null?void 0:e._id}`,className:"opacity-50",children:s.jsx("small",{children:$(e==null?void 0:e.createdAt)})})}),s.jsx(L,{side:"bottom",align:"start",children:z(e==null?void 0:e.createdAt,"EEEE, d MMMM, yyyy, HH:mm",{locale:A})})]})})]}),s.jsx(G,{postId:e==null?void 0:e._id,setDeletePost:()=>c(!0),setEditPost:()=>t(!0),isEdit:(e==null?void 0:e.postedBy._id)===o._id,isCheckBookMark:o.bookmarkedPosts.includes(e==null?void 0:e._id)})]}),s.jsx(r,{to:`${l.HOME}${l.POSTS}/${e==null?void 0:e._id}`,className:"text-sm",children:e==null?void 0:e.context}),((g=e==null?void 0:e.fileUrls)==null?void 0:g.length)>0&&s.jsx(I,{attachments:e==null?void 0:e.fileUrls,onOpenChange:()=>n(!0)})]}),s.jsxs("div",{className:"flex gap-3 mt-1",children:[s.jsxs("div",{className:"flex gap-1 items-center cursor-pointer rounded-full hover:bg-muted p-2",onClick:()=>D.mutate(e._id),children:[s.jsx(K,{className:v("size-5",S&&"fill-red-500 text-red-500")}),s.jsx("small",{children:C((N=e==null?void 0:e.likes)==null?void 0:N.length)})]}),s.jsxs("div",{className:"flex gap-1 items-center cursor-pointer rounded-full hover:bg-muted p-2",onClick:()=>m(!0),children:[s.jsx(Q,{className:"size-5"}),s.jsx("small",{children:C(e.totalCountComment||0)})]})]})]})]})})]})};export{X as P};
