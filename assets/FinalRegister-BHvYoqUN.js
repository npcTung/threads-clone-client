import{r as n,u as O,a as k,j as s,D as v,h as y,i as D,k as w,l as I,G as S,H as C,K as L,M as a,B as T,N as E,f as F,z as G,O as H,J as t,p as R,w as b}from"./index-Bq5uJWU6.js";const{RotateCcw:B}=G,z=({open:d,onOpenChange:l})=>{const[i,c]=n.useState(""),{email:o,setEmail:p,setIsLoggedIn:u,setToken:h}=O(),m=k(),[g,r]=n.useState(!1),[j,x]=n.useState(!1),f=async()=>{try{r(!0);const e=await H({otp:i,email:o});e.success&&(t.success(e.mes),u(!0),h(e.token),c(""),p(null),l(),m(R.HOME))}catch(e){t.error(e.response.data.mes)}finally{r(!1)}},N=async()=>{x(!0);try{const e=await b(o);e.success?t.success(e.mes):t.error(e.mes)}catch(e){console.error(e.message)}finally{x(!1)}};return s.jsx(v,{open:d,onOpenChange:l,children:s.jsxs(y,{children:[s.jsxs(D,{children:[s.jsx(w,{children:"Hoàn tất đăng ký"}),s.jsx(I,{children:"Nhập code đã được gửi về gmail đã đăng ký của bạn."})]}),s.jsxs("div",{className:"w-full flex flex-col items-center justify-center space-y-5",children:[s.jsx(S,{maxLength:6,pattern:C,value:i,onChange:e=>c(e),children:s.jsxs(L,{children:[s.jsx(a,{index:0,className:"otp-slot"}),s.jsx(a,{index:1,className:"otp-slot"}),s.jsx(a,{index:2,className:"otp-slot"}),s.jsx(a,{index:3,className:"otp-slot"}),s.jsx(a,{index:4,className:"otp-slot"}),s.jsx(a,{index:5,className:"otp-slot"})]})}),s.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[s.jsx("span",{className:"text-xs",children:"Nếu bạn không nhận code, vui lòng kiểm tra hộp thư."}),s.jsxs(T,{variant:"link",className:"space-x-1 p-0 text-xs underline",onClick:N,disabled:j,children:[s.jsx("span",{children:"Gửi lại"})," ",s.jsx(B,{className:"size-3"})]})]})]}),s.jsx(E,{children:s.jsx(F,{loading:g,onClick:f,className:"w-full",children:"Gửi"})})]})})};export{z as F};
