import{r as g,u as k,a as S,b as F,t as C,c as P,j as s,F as D,d as E,e as y,L as I,p as l,f as v,B as R,g as U,D as T,h as L,i as M,k as H,l as G,I as V,m as $,n as z,o as A,J as i,q as B,s as _,v as J,w as W}from"./index-Bq5uJWU6.js";import{g as q}from"./app-Caw1S-Fu.js";import{F as Q}from"./FinalRegister-BHvYoqUN.js";const Z=()=>{const[t,a]=g.useState(!1),[x,r]=g.useState(!1),[p,o]=g.useState(!1),[f,n]=g.useState(!1),{setGoogleData:j,setEmail:c,setIsLoggedIn:w,setToken:N}=k(),b=S(),m=F({resolver:C($),defaultValues:{userName:"",password:""}}),d=async h=>{try{r(!0);const e=await z(h.userName);if(e.isVerified){const u=await A(h);u.success&&(N(u.token),w(!0),i.success(u.mes),b(l.HOME))}else c(e.email),o(!0)}catch(e){i.error(e.response.data.mes)}finally{r(!1)}},O=P({onSuccess:async h=>{const e=await q(h.access_token);if(e.status===200){j({email:e.data.email,avatarUrl:e.data.picture,displayName:e.data.name,verified:e.data.verified_email});const u=await B(e.data.email);u.hasUser?(i.success("Đăng nhập thành công."),N(u.token),w(!0),j(null),b(l.HOME)):a(!0)}},onError:h=>i.error(h)});return s.jsxs(s.Fragment,{children:[s.jsx(X,{open:t,onOpenChange:a}),s.jsx(Y,{open:p,onOpenChange:o,setShowFinalRegister:n}),s.jsx(Q,{open:f,onOpenChange:n}),s.jsxs(D,{...m,children:[s.jsxs("form",{onSubmit:m.handleSubmit(d),className:"space-y-3",children:[s.jsx(E,{form:m,lable:"Tên người dùng",name:"userName",placeholder:"Tên người dùng..."}),s.jsx(y,{form:m,lable:"Mật khẩu",name:"password",placeholder:"Mật khẩu..."}),s.jsx("div",{className:"w-full flex items-center justify-end",children:s.jsx(I,{to:`${l.HOME}${l.AUTH}/${l.FORGOT_PASSWORD}`,className:"hover:underline text-sm",children:"Quên mật khẩu?"})}),s.jsx(v,{loading:x,type:"submit",className:"w-full",children:"Đăng nhập"})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("div",{className:"border-t flex-1 border-primary/30"}),s.jsx("span",{children:"or"}),s.jsx("div",{className:"border-t flex-1 border-primary/30"})]}),s.jsxs(R,{onClick:O,variant:"outline",className:"w-full border-primary space-x-2",children:[s.jsx(K,{className:"size-6"}),s.jsx("span",{children:"Đăng nhập bằng google"})]})]})]})},K=({size:t,className:a})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:t??40,height:t??40,viewBox:"0 0 48 48",className:U(a),children:[s.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),s.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),s.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),s.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),X=({open:t,onOpenChange:a})=>{const{googleData:x,setGoogleData:r,setIsLoggedIn:p,setToken:o}=k(),[f,n]=g.useState(!1),j=S(),c=F({resolver:C(_),defaultValues:{password:"",confirmPassword:"",userName:""}}),w=async N=>{const{confirmPassword:b,...m}={...N,...x};try{n(!0);const d=await J(m);d.success&&(i.success(d.mes),o(d.token),p(!0),r(null),a(!1),j(l.HOME))}catch(d){i.error(d.response.data.mes)}finally{n(!1)}};return s.jsx(T,{open:t,onOpenChange:a,children:s.jsx(L,{children:s.jsxs(M,{children:[s.jsx(H,{children:"Thiết lập tài khoản"}),s.jsx(G,{children:"Đây là tài khoản mới. Vui lòng điền đầy đủ thông tin cho tài khoản của bạn"}),s.jsx(D,{...c,children:s.jsxs("form",{onSubmit:c.handleSubmit(w),className:"space-y-3 border-t py-3",children:[s.jsx(E,{form:c,lable:"Tên người dùng",name:"userName",placeholder:"Tên người dùng..."}),s.jsx(y,{form:c,lable:"Mật khẩu",name:"password",placeholder:"Mật khẩu..."}),s.jsx(y,{form:c,lable:"Nhập lại mật khẩu",name:"confirmPassword",placeholder:"Nhập lại mật khẩu..."}),s.jsx(v,{loading:f,type:"submit",className:"w-full",children:"Thiết lập"})]})})]})})})},Y=({open:t,onOpenChange:a,setShowFinalRegister:x})=>{const{email:r}=k(),[p,o]=g.useState(!1),f=async()=>{try{o(!0);const n=await W(r);n.success&&(i.success(n.mes),x(!0),a())}catch(n){i.error(n.response.data.mes)}finally{o(!1)}};return s.jsx(T,{open:t,onOpenChange:a,children:s.jsxs(L,{className:"space-y-3",children:[s.jsxs(M,{children:[s.jsx(H,{children:"Gửi email xác minh tài khoản"}),s.jsx(G,{children:"Tài khoản này chưa được xác minh vui lòng xác minh trước khi đăng nhập"})]}),s.jsx(V,{type:"email",id:"email",placeholder:"Địa chỉ email...",value:r,disabled:!0}),s.jsx(v,{loading:p,onClick:f,className:"w-full",children:"Gửi email"})]})})},ss="/threads-clone-client/assets/login-image-DbRzZN7T.jpg",ls=()=>s.jsx("main",{className:"flex h-screen items-center justify-center p-5",children:s.jsxs("div",{className:"flex h-full max-h-[40rem] w-full max-w-[64rem] overflow-hidden rounded-2xl bg-card shadow-lg border",children:[s.jsxs("div",{className:"w-full space-y-10 overflow-y-auto p-10 md:w-1/2",children:[s.jsxs("div",{className:"space-y-1 text-center",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Đăng ký vào bugbook"}),s.jsxs("span",{className:"text-muted-foreground",children:["Nơi mà ngay cả ",s.jsx("span",{className:"italic",children:"bạn"})," cũng có thể tìm thấy một người bạn."]})]}),s.jsxs("div",{className:"space-y-5",children:[s.jsx(Z,{}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("span",{children:"Bạn chưa có tài khoản?"}),s.jsx(I,{to:`${l.HOME}${l.AUTH}/${l.REGISTER}`,className:"text-blue-700 transition-all hover:underline",children:"Đăng ký"})]})]})]}),s.jsx("img",{src:ss,alt:"background signup image",className:"hidden w-1/2 object-cover md:block"})]})});export{ls as default};
