import{r as l,j as s,L as N,p as u,A as v,x as b,y as S,P as k,I as P,f as g,a as L,b as O,D as C,h as D,i as F,k as I,l as A,F as R,d as E,B as $,e as j,z as G,Q as T,J as c,t as V,R as z,w as B,S as H}from"./index-B1Jl6qxH.js";const{AlertCircle:M,MoveLeft:Q,RotateCcw:J}=G,W=()=>{const[r,d]=l.useState(""),[n,h]=l.useState(""),[p,o]=l.useState(!1),[x,i]=l.useState(!1),e=async()=>{if(!r){h("Vui lòng nhập email");return}try{i(!0);const a=await T(r);a.success&&(c.success(a.mes),h(""),o(!0))}catch(a){d(a.response.data.mes)}finally{i(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx(U,{open:p,onOpenChange:o,email:r}),s.jsx("main",{className:"flex h-screen items-center justify-center p-5",children:s.jsx("div",{className:"h-full max-h-[40rem] w-full max-w-[64rem] overflow-hidden rounded-2xl bg-card shadow-lg",children:s.jsxs("div",{className:"w-full space-y-10 overflow-y-auto p-10",children:[s.jsxs("div",{className:"space-y-1 text-center relative",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Quên mật khẩu"}),s.jsx("span",{className:"text-muted-foreground",children:"Vui lòng nhập email vào đây để tiến hành quên mật khẩu."}),s.jsx(N,{to:`/${u.AUTH}/${u.LOGIN}`,title:"Quay về trang đăng nhập",className:"absolute top-0 left-0 cursor-pointer p-2 border rounded-full hover:bg-muted",children:s.jsx(Q,{className:"size-5"})})]}),s.jsxs("div",{className:"flex flex-col space-y-5",children:[n&&s.jsxs(v,{variant:"destructive",children:[s.jsx(M,{className:"h-4 w-4"}),s.jsx(b,{children:"Error"}),s.jsx(S,{children:n})]}),s.jsxs("div",{className:"space-y-1.5",children:[s.jsx(k,{htmlFor:"email",children:"Địa chỉ email"}),s.jsx(P,{id:"email",type:"email",placeholder:"Nhập email vào đây",onChange:a=>d(a.target.value)})]}),s.jsx(g,{loading:x,onClick:e,children:"Gửi"})]})]})})})]})},U=({open:r,onOpenChange:d,email:n})=>{const h=L(),[p,o]=l.useState(!1),[x,i]=l.useState(!1),e=O({resolver:V(H),defaultValues:{otp:"",password:"",confirmPassword:""}}),a=async t=>{o(!0);const{confirmPassword:q,...y}=t;try{const m=await z(y,n);m.success&&(c.success(m.mes),f(),h(`/${u.AUTH}/${u.LOGIN}`))}catch(m){c.error(m.response.data.mes)}finally{o(!1)}},f=()=>{d(!1),e.reset()},w=async()=>{i(!0);try{const t=await B(n);t.success?c.success(t.mes):c.error(t.mes)}catch(t){console.error(t.message)}finally{i(!1)}};return s.jsx(C,{open:r,onOpenChange:f,children:s.jsxs(D,{children:[s.jsxs(F,{children:[s.jsx(I,{children:"Đặt lại mật khẩu"}),s.jsx(A,{children:"Vui lòng nhập mật khẩu mới và xác nhận lại."})]}),s.jsx(R,{...e,children:s.jsxs("form",{onSubmit:e.handleSubmit(a),className:"space-y-5",children:[s.jsxs("div",{className:"flex space-x-2 items-end w-full",children:[s.jsx(E,{form:e,lable:"Nhập Otp",name:"otp",placeholder:"Nhập otp..."}),s.jsxs($,{variant:"outline",className:"space-x-1",type:"button",onClick:w,disabled:x,children:[s.jsx("span",{children:"Gửi lại"}),s.jsx(J,{className:"size-4"})]})]}),s.jsx(j,{form:e,lable:"Mật khẩu",name:"password",placeholder:"Mật khẩu..."}),s.jsx(j,{form:e,lable:"Nhập lại mật khẩu",name:"confirmPassword",placeholder:"Nhập lại mật khẩu..."}),s.jsx(g,{loading:p,type:"submit",className:"w-full",children:"Đặt lại mật khẩu"})]})})]})})};export{W as default};
