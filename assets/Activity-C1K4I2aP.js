import{W as d,j as e,X as u,a0 as p,Y as h,p as o,U as f,aj as j,L as m,ak as N,al as g,am as y,an as b,ao as v,Z as I,z as S,_ as $}from"./index-R1GuM6_P.js";import{e as T}from"./actions-DjXF_G0B.js";import"./conversation-CioXlWUD.js";const{User2:w,MessageSquare:z,Heart:x,Dot:P,LoaderCircle:C}=S,U=()=>{const{data:s,fetchNextPage:c,hasNextPage:l,isFetching:a,isFetchingNextPage:n,status:r}=d({queryKey:["activities"],queryFn:({pageParam:i})=>T(i),initialPageParam:null,getNextPageParam:i=>i==null?void 0:i.nextCursor,staleTime:5e3}),t=(s==null?void 0:s.pages.flatMap(i=>i.activities))||[];return r==="pending"?e.jsx(u,{}):r==="success"&&!t.length&&!l?e.jsx("div",{className:"p-5 flex items-center justify-center",children:e.jsx("span",{className:"text-center text-destructive",children:"Không có thông báo nào."})}):r==="error"?e.jsx(p,{}):e.jsx("div",{className:"max-w-[720px] mx-auto mb-10 p-5 border space-y-5 lg:rounded-2xl bg-card",children:e.jsxs(h,{onBottomReached:()=>l&&!a&&c(),children:[t.map(i=>e.jsx(M,{data:i},i._id)),n&&e.jsx(C,{className:"mx-auto size-5 animate-spin"})]})})},M=({data:s})=>{var r,t,i;const c={Follow:{message:`${s.isSuerId.displayName} đã theo dõi bạn.`,icon:e.jsx(w,{className:"size-9 p-1 rounded-full bg-muted text-primary"}),herf:`/${s.isSuerId.userName}`},Like:{message:`${s.isSuerId.displayName} thích bài viết của bạn.`,icon:e.jsx(x,{className:"size-9 p-1 rounded-full bg-muted text-red-500 fill-red-500"}),herf:`/${o.POSTS}/${(r=s==null?void 0:s.postId)==null?void 0:r._id}`},Comment:{message:`${s.isSuerId.displayName} đã bình luận về bài đăng của bạn.`,icon:e.jsx(z,{className:"size-9 p-1 rounded-full bg-muted text-primary"}),herf:`/${o.POSTS}/${(t=s==null?void 0:s.postId)==null?void 0:t._id}`},Like_Comment:{message:`${s.isSuerId.displayName} thích bình luận của bạn trong bài viết mà bạn đã bình luận.`,icon:e.jsx(x,{className:"size-9 p-1 rounded-full bg-muted text-red-500 fill-red-500"}),herf:`/${o.POSTS}/${(i=s==null?void 0:s.postId)==null?void 0:i._id}`}},{message:l,icon:a,herf:n}=c[s.type];return e.jsx("article",{className:"flex gap-3 rounded-2xl bg-card p-5",children:e.jsxs("div",{className:"flex space-x-5 w-full",children:[e.jsx(f,{avatarUrl:s.isSuerId.avatarUrl,size:36}),e.jsxs("div",{className:"flex flex-col border-b w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx(j,{user:s.isSuerId,children:e.jsx(m,{to:`/${s.isSuerId.userName}`,className:"font-medium hover:underline",children:`${s.isSuerId.displayName}:`})}),e.jsx(m,{to:n,className:"block text-xs opacity-50 pt-1",children:l})]}),a]}),s.postId&&e.jsxs("div",{className:"flex items-center w-full",children:[e.jsxs(m,{to:n,className:"flex items-center flex-1",children:[e.jsx("span",{className:"line-clamp-3 text-xs whitespace-pre-line text-muted-foreground",children:s.postId.context}),s.commentId&&e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"size-5 opacity-50"}),e.jsx("small",{className:"opacity-50",children:s.commentId.context})]})]}),e.jsx(N,{delayDuration:300,children:e.jsxs(g,{children:[e.jsx(y,{asChild:!0,children:e.jsx("small",{className:"opacity-50 cursor-default",children:b(s.createdAt)})}),e.jsx(v,{side:"bottom",align:"start",children:I(s.createdAt,"EEEE, d MMMM, yyyy, HH:mm",{locale:$})})]})})]})]})]})})};export{U as default};
